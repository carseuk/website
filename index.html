<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carse Analytics — Shopify insights for SMEs</title>
  <meta name="description" content="Carse helps SMEs make sense of messy Shopify data — turning transactions into insights you can use to grow with confidence." />
  <link rel="canonical" href="https://carse.uk/" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Inter:wght@300..700&display=swap" rel="stylesheet">


  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon-16x16.png">
  <link rel="manifest" href="assets/site.webmanifest">
  <link rel="shortcut icon" href="assets/favicon.ico">

  <style>
    :root{
      --cream:#F7F6EF; --sand:#E8DBC9; --sage:#AEC2B3; --deep:#1E2A22;
      --text:#202320; --green:#034b3f; --card:#ffffff;
      --header-h:68px; --container:1100px;

      /* RGBA tints */
      --sand-02: rgba(232,219,201,.02);
      --sand-03: rgba(232,219,201,.03);
      --sand-04: rgba(232,219,201,.04);
      --sand-06: rgba(232,219,201,.06);
      --sand-08: rgba(232,219,201,.08);
      --sage-04: rgba(174,194,179,.04);
      --sage-05: rgba(174,194,179,.05);
      --sage-07: rgba(174,194,179,.07);
      :root{
  /* add stronger options */
  --sand-10: rgba(232,219,201,.10);
  --sand-12: rgba(232,219,201,.12);
  --sage-08: rgba(174,194,179,.08);
  --sage-10: rgba(174,194,179,.10);
}


      /* Carousel sizing */
      --card-w: 320px;
      --gap: 20px;
      --arrow-pad: 72px;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;scroll-behavior:smooth;scroll-snap-type:y mandatory}
    body{
      font:16px/1.6 Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text); overscroll-behavior-y:contain; background:var(--cream);
      overflow-x:hidden;
    }
    .container{max-width:var(--container); margin:0 auto; padding:0 20px}

    /* Header */
    header.site-header{position:fixed; top:0; left:0; right:0; z-index:100; background:var(--green)}
    .header-inner{height:var(--header-h); display:flex; align-items:center; justify-content:space-between}
    .brand{font-family:"Cormorant Garamond",serif; font-weight:700; font-size:28px; color:var(--cream); text-decoration:none}
    /* Split-brand styling: serif main name + lighter sans qualifier */
    
/* Loosen tracking just on “Carse” */
.brand-serif{
  font-family:"Cormorant Garamond", serif;
  font-weight:700;
  letter-spacing:.022em;     /* try .02–.04em; .03em is a good start */
  font-kerning: normal;     /* keep kerning active alongside tracking */
}


.brand-sans{
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  font-weight: 025; 
  font-variation-settings:"wght" 025;         /* thinner */
  font-size: .78em;          /* a touch smaller than “Carse” */
  letter-spacing: .000em;    /* tighter tracking (was too airy) */
  margin-left: .10ch;        /* small gap from “Carse” */
  color: var(--cream);
  opacity: .90;              /* optional; remove if you want full strength */
}
/* If you used the variable Inter link above, you can be ultra-precise: */
/* .brand-sans{ font-weight: 350; font-variation-settings:"wght" 350; } */
  @media (min-width: 900px){
  .brand-serif{ letter-spacing:.035em; }
}

    nav.primary a{margin-left:20px; text-decoration:none; color:var(--cream)}

    /* Panels + baseline */
    section.panel{min-height:100vh; scroll-snap-align:start; position:relative; display:flex; align-items:center}
    section.panel .inner{position:relative; z-index:2; width:100%}
    section.panel .inner.narrow{max-width:900px; margin:0 auto; text-align:center; padding:80px 20px}

    /* Stronger but still minimal */
.hero{background:var(--cream)}
.portfolio{background:linear-gradient(var(--sand-10),var(--sand-10)),var(--cream)}
.services{background:linear-gradient(var(--sage-10),var(--sage-10)),var(--cream)}
.about{background:linear-gradient(var(--sand-06),var(--sand-06)),var(--cream)}
.contact{background:linear-gradient(var(--sand-12),var(--sand-12)),var(--cream)}


    /* Soft separators: hairline + feather at top of each non-hero section */
    .panel:not(.hero)::before{
      content:""; position:absolute; inset:0 0 auto 0; height:26px; z-index:1; pointer-events:none;
      background: linear-gradient(to bottom, rgba(30,42,34,.10), rgba(30,42,34,0));
      border-top:1px solid rgba(30,42,34,.12);
      mix-blend-mode: multiply;
    }

    /* Parallax layers */
    .parallax-layer{position:absolute; inset:-20% 0 -20% 0; z-index:0; pointer-events:none; will-change:transform; background-size:cover; background-position:center}
    /* Existing photo layer hook */
    .parallax-bg{position:absolute; inset:-20% 0 -20% 0; z-index:0; pointer-events:none; will-change:transform; background-size:cover; background-position:center}

    /* Radial 'blob' accents */
    .parallax-blob{position:absolute; width:80vmin; height:80vmin; pointer-events:none; z-index:1; will-change:transform; opacity:.9}
    .blob-sand{background:radial-gradient(closest-side, rgba(232,219,201,.16), rgba(232,219,201,0) 70%)}
    .blob-sage{background:radial-gradient(closest-side, rgba(174,194,179,.16), rgba(174,194,179,0) 70%)}

    /* Background images (optional placeholders) */
    .hero .parallax-bg{background-image:url('assets/hero.jpg')}
    .portfolio .parallax-bg{background-image:url('assets/bg-portfolio.jpg')}
    .services .parallax-bg{background-image:url('assets/bg-services.jpg')}
    .about .parallax-bg{background-image:url('assets/bg-about.jpg')}
    .contact .parallax-bg{background-image:url('assets/bg-contact.jpg')}

    /* Type & buttons */
    h1,h2,h3{font-family:"Cormorant Garamond",serif; color:var(--green); margin-bottom:16px}
    .eyebrow{letter-spacing:.12em; text-transform:uppercase; font:700 12px/1 Inter,system-ui; color:#46514a; opacity:.8; margin-bottom:10px}
    .lead{max-width:70ch; margin:0 auto}
    .btn{display:inline-block; margin-top:20px; padding:12px 20px; border-radius:999px; background:var(--green); color:var(--cream); text-decoration:none}
    .btn.secondary{background:transparent; border:1px solid var(--green); color:var(--green)}
    .btn-row{display:flex; gap:12px; justify-content:center; flex-wrap:wrap}
    .kpis{display:flex; gap:16px; justify-content:center; flex-wrap:wrap; margin-top:18px}
    .kpis .kpi{background:#fff; border:1px solid rgba(0,0,0,.06); border-radius:999px; padding:8px 12px; font-size:14px}

    /* Carousel (3 visible, center emphasis, arrows in side padding) */
    .portfolio .carousel{position:relative; max-width:calc(var(--card-w)*3 + var(--gap)*2 + var(--arrow-pad)*2); margin:12px auto 0; overflow:hidden; padding:0 var(--arrow-pad)}
    .track{display:flex; align-items:stretch; gap:var(--gap); transition:transform 600ms ease; will-change:transform}
    .card{display:block; flex:0 0 var(--card-w); background:var(--cream); border:1px solid rgba(0,0,0,.06); border-radius:16px; box-shadow:0 6px 24px rgba(0,0,0,.06); padding:18px; text-decoration:none; color:var(--text); transform:scale(.92); opacity:.65; transition:transform 400ms ease, opacity 300ms ease, box-shadow 300ms ease}
    .card h3{color:var(--green); margin:0 0 .4em}
    .card p{margin:0; color:#333}
    .card.is-current{transform:scale(1); opacity:1; box-shadow:0 10px 36px rgba(0,0,0,.08); z-index:2}
    .portfolio .card.is-left1, .portfolio .card.is-right1{transform:scale(.96); opacity:.85}
    .portfolio .card.is-left2, .portfolio .card.is-right2{opacity:0; visibility:hidden; pointer-events:none; transform:scale(.9)}

    .carousel button.nav{position:absolute; top:50%; transform:translateY(-50%); background:var(--green); color:var(--cream); border:none; border-radius:999px; width:40px; height:40px; cursor:pointer; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 16px rgba(0,0,0,.12); z-index:10}
    .carousel button.nav:hover{filter:brightness(.9)}
    .carousel button.prev{left:12px}
    .carousel button.next{right:12px}

    /* Services cards */
    .services .grid{display:grid; grid-template-columns:repeat(3,1fr); gap:18px; max-width:var(--container); margin:0 auto}
    .services .card{background:#fff; border:1px solid rgba(0,0,0,.08); border-radius:16px; padding:20px; box-shadow:0 8px 24px rgba(0,0,0,.06); text-align:left}
    .services .card h3{margin:0 0 6px}
    .services .card p{margin:0; color:#4a4f4a}
    @media (max-width: 900px){.services .grid{grid-template-columns:1fr}}

    /* About/Contact */
    .about .wrap{display:grid; grid-template-columns:1.1fr .9fr; gap:24px; max-width:var(--container); margin:0 auto; padding:0 20px}
    .about ul{margin:8px 0 0 18px}
    @media (max-width: 900px){.about .wrap{grid-template-columns:1fr}}
    .contact .wrap{display:grid; grid-template-columns:1fr 1fr; gap:24px; max-width:var(--container); margin:0 auto; padding:0 20px}
    .contact form{display:grid; gap:12px; text-align:left}
    .field{display:grid; gap:6px}
    .field input,.field textarea{width:100%; padding:12px 14px; border:1px solid rgba(0,0,0,.12); border-radius:12px; background:#fff}
    .field textarea{min-height:120px; resize:vertical}
    .help{font-size:12px; color:#4a4f4a}
    @media (max-width: 900px){.contact .wrap{grid-template-columns:1fr}}

    /* Right-side pagination dots */
    .pager{position:fixed; inset:0 20px 0 auto; display:flex; align-items:center; justify-content:center; pointer-events:none; z-index:90}
    .pager ul{list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:12px}
    .pager a{pointer-events:auto; width:10px; height:10px; border-radius:50%; display:block; border:2px solid rgba(3,75,63,.35); background:transparent; text-indent:-9999px; overflow:hidden; transition:transform .2s ease, background-color .2s ease, border-color .2s ease, box-shadow .2s ease}
    .pager a:hover{transform:scale(1.2)}
    .pager a:focus-visible{outline:2px solid var(--green); outline-offset:3px; border-color:var(--green)}
    .pager a[aria-current="true"]{background:var(--green); border-color:var(--green); box-shadow:0 0 0 3px var(--cream)}
    @media (max-width: 768px){.pager{display:none}}

    footer{background:var(--cream); padding:20px; text-align:center; font-size:14px}
    @media (prefers-reduced-motion: reduce){html{scroll-snap-type:none}.track{transition:none}.parallax-bg,.parallax-blob{display:none}}

    /* Line pagination (under carousel) */
    .carousel-bars{display:flex; gap:10px; justify-content:center; align-items:center; margin-top:12px}
    .carousel-bars button{width:24px; height:2px; border:none; background:rgba(3,75,63,.30); opacity:.6; cursor:pointer; padding:0; transition:opacity .2s ease, transform .2s ease, background-color .2s ease}
    .carousel-bars button[aria-current="true"]{background:var(--green); opacity:1}
    .carousel-bars button:hover{opacity:.9; transform:scaleY(1.2)}
    .carousel-bars button:focus-visible{outline:2px solid var(--green); outline-offset:3px}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="#hero">
      <span class="brand-serif">Carse</span>
      <span class="brand-sans">Analytics</span>
      </a>

      <nav class="primary">
        <a href="#portfolio">Work</a>
        <a href="#services">Services</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </header>

  <nav class="pager" aria-label="Section navigation">
    <ul id="pager-dots"></ul>
  </nav>

  <main>
    <!-- HERO -->
    <section class="hero panel" id="hero">
      <div class="parallax-bg parallax-layer" data-speed="0.25"></div>
      <!-- Optional subtle blob -->
      <div class="parallax-blob blob-sand" data-speed="0.10" style="left:-20vmin; top:20vh;"></div>
      <div class="inner narrow">
        <div class="eyebrow">Shopify analytics for SMEs</div>
        <h1>Discover the story behind your sales…</h1>
        <p class="lead">We reconcile Shopify transactions, fees, returns and discounts to surface the few insights that actually change behaviour — so you can grow with confidence.</p>
        <div class="btn-row">
          <a class="btn" href="#contact">Get a 20‑min data audit</a>
          <a class="btn secondary" href="mailto:hello@carse.uk">Email hello@carse.uk</a>
        </div>
        <div class="kpis">
          <span class="kpi">↑ LTV via cohort clarity</span>
          <span class="kpi">↓ Refunds by 10–20%</span>
          <span class="kpi">True margin, not guesswork</span>
        </div>
      </div>
    </section>

    <!-- PORTFOLIO -->
    <section class="portfolio panel" id="portfolio">
      <div class="parallax-bg parallax-layer" data-speed="0.18"></div>
      <div class="parallax-blob blob-sand" data-speed="0.14" style="right:-18vmin; bottom:8vh;"></div>
      <div class="inner">
        <div class="container" style="text-align:center">
          <h2>Selected work</h2>
          <p style="max-width:70ch; margin:0 auto 8px">Case studies showcasing margin clarity, refunds reduction, and actionable dashboards.</p>
        </div>
        <div class="carousel" role="region" aria-roledescription="carousel" aria-label="Portfolio carousel">
          <button class="nav prev" aria-label="Previous">&#10094;</button>
          <div class="track" role="listbox" aria-live="polite">
            <a class="card is-current" href="#case1" role="option" aria-selected="true" tabindex="0">
              <h3>Reduce refunds by 18%</h3>
              <p>Post‑purchase flows for a DTC apparel brand lowered returns and improved CX.</p>
            </a>
            <a class="card" href="#case2" role="option" aria-selected="false" tabindex="-1">
              <h3>True margin, not guesswork</h3>
              <p>Reconciled Shopify, fees, shipping, and discounts for reliable unit economics.</p>
            </a>
            <a class="card" href="#case3" role="option" aria-selected="false" tabindex="-1">
              <h3>Cohorts that drive LTV</h3>
              <p>Identified retention levers by segmenting first‑time buyers vs subscribers.</p>
            </a>
            <a class="card" href="#case4" role="option" aria-selected="false" tabindex="-1">
              <h3>Zero‑vanity dashboards</h3>
              <p>Monthly reporting focused on actions, not wallpaper charts.</p>
            </a>
            <a class="card" href="#case5" role="option" aria-selected="false" tabindex="-1">
              <h3>Funnel clarity</h3>
              <p>Mapped ad → PDP → checkout to remove friction and measure impact.</p>
            </a>
          </div>
          <div class="carousel-bars" role="tablist" aria-label="Slide navigation"></div>
          <button class="nav next" aria-label="Next">&#10095;</button>
        </div>
      </div>
    </section>

    <!-- SERVICES -->
    <section class="services panel" id="services">
      <div class="parallax-bg parallax-layer" data-speed="0.22"></div>
      <div class="parallax-blob blob-sage" data-speed="0.12" style="left:-22vmin; top:-6vmin;"></div>
      <div class="inner narrow">
        <h2>How we work</h2>
        <div class="grid">
          <article class="card">
            <h3>1) Quick audit</h3>
            <p>Connect Shopify. We reconcile gateway fees, shipping, discounts and returns to reveal true unit economics.</p>
          </article>
          <article class="card">
            <h3>2) Clear insights</h3>
            <p>Three decision‑ready findings with simple visuals and plain English. No jargon, no wallpaper charts.</p>
          </article>
          <article class="card">
            <h3>3) Ongoing reporting</h3>
            <p>Monthly dashboards that focus attention on actions: retention cohorts, contribution margin, and funnel friction.</p>
          </article>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section class="about panel" id="about">
      <div class="parallax-bg parallax-layer" data-speed="0.20"></div>
      <div class="parallax-blob blob-sand" data-speed="0.10" style="left:-10vmin; bottom:10vh;"></div>
      <div class="inner">
        <div class="wrap">
          <div>
            <h2>About Carse</h2>
            <p>Carse is a small, focused analytics studio. We specialise in Shopify data for SMEs — reconciling transactions, fees, returns and discounts to reveal what drives margin and repeat purchase. We keep deliverables short, visual and decision‑ready.</p>
            <ul>
              <li>Opinionated on what matters; minimalist on charts.</li>
              <li>Built for owners and operators, not analysts.</li>
              <li>Calm communication, clear next steps.</li>
            </ul>
          </div>
          <aside>
            <h3>Founder</h3>
            <p>Sam Carse has worked across DTC and services, translating messy data into everyday decisions. Carse is a boutique by design — you work with the person who does the work.</p>
          </aside>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section class="contact panel" id="contact">
      <div class="parallax-bg parallax-layer" data-speed="0.18"></div>
      <div class="parallax-blob blob-sage" data-speed="0.14" style="right:-18vmin; bottom:-8vmin;"></div>
      <div class="inner">
        <div class="wrap">
          <div>
            <h2>Start with a quick audit</h2>
            <p>Send a link to your Shopify store and we’ll reply with three opportunities to improve margin or retention.</p>
            <p><strong>Email:</strong> <a href="mailto:hello@carse.uk">hello@carse.uk</a></p>
          </div>
          <form method="POST" action="#">
            <div class="field">
              <label for="name">Name</label>
              <input id="name" name="name" autocomplete="name" required />
            </div>
            <div class="field">
              <label for="email">Email</label>
              <input id="email" name="email" type="email" autocomplete="email" required />
            </div>
            <div class="field">
              <label for="store">Shopify store URL</label>
              <input id="store" name="store" type="url" placeholder="https://yourstore.myshopify.com" required />
            </div>
            <div class="field">
              <label for="msg">Message</label>
              <textarea id="msg" name="message" placeholder="Tell us about your store…" required></textarea>
            </div>
            <input type="hidden" name="utm_source" id="utm_source" />
            <input type="hidden" name="utm_medium" id="utm_medium" />
            <input type="hidden" name="utm_campaign" id="utm_campaign" />
            <button class="btn" type="submit">Send message</button>
            <p class="help">We’ll only use your details to respond to this enquiry.</p>
          </form>
        </div>
      </div>
    </section>
  </main>

  <footer>
    © <span id="year"></span> Carse. No vanity dashboards.
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Parallax layers (images + blobs)
    (function(){
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if(prefersReduced) return;
      const layers = document.querySelectorAll('.parallax-bg, .parallax-blob');
      if(!layers.length) return;
      let ticking=false;
      function update(){
        layers.forEach(layer=>{
          const speed=parseFloat(layer.dataset.speed||'0.2');
          const rect=layer.parentElement.getBoundingClientRect();
          const offset=rect.top*speed;
          layer.style.transform=`translateY(${offset}px)`;
        });
        ticking=false;
      }
      function onScroll(){if(!ticking){ticking=true;requestAnimationFrame(update);}}
      window.addEventListener('scroll',onScroll,{passive:true});
      window.addEventListener('resize',onScroll);
      onScroll();
    })();

    // ===== Portfolio carousel (center mode; 3 visible; seamless with clones; arrows in side padding) =====
    (function(){
      const carousel = document.querySelector('.portfolio .carousel');
      if (!carousel) return;
      const track   = carousel.querySelector('.track');
      const prevBtn = carousel.querySelector('.prev');
      const nextBtn = carousel.querySelector('.next');

      const originals = Array.from(track.children);
      const n = originals.length;
      if (n < 2) return;

      const buffer = 2; // neighbors
      function cloneSlide(node){
        const c = node.cloneNode(true);
        c.setAttribute('aria-hidden','true'); c.tabIndex=-1;
        c.classList.remove('is-current','is-left1','is-left2','is-right1','is-right2');
        return c;
      }
      for (let i=n-buffer;i<n;i++){ track.insertBefore(cloneSlide(originals[i]), track.firstChild); }
      for (let i=0;i<buffer;i++){ track.appendChild(cloneSlide(originals[i])); }

      let slides = Array.from(track.children);
      let index = buffer; // first real

      const AUTOPLAY_MS = 5000;
      const reduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      let timer=null;

      function slideAt(offset){ const len=slides.length; return slides[(index+offset+len)%len]; }

      function setPositions(){
        slides.forEach(s=>{ s.classList.remove('is-current','is-left1','is-left2','is-right1','is-right2'); s.setAttribute('aria-selected','false'); s.tabIndex=-1; });
        const c=slideAt(0), l1=slideAt(-1), l2=slideAt(-2), r1=slideAt(1), r2=slideAt(2);
        c.classList.add('is-current'); c.setAttribute('aria-selected','true'); c.tabIndex=0;
        l1.classList.add('is-left1'); l2.classList.add('is-left2'); r1.classList.add('is-right1'); r2.classList.add('is-right2');
      }

      function center(withAnim=true){
        const styles=getComputedStyle(carousel);
        const pl=parseFloat(styles.paddingLeft)||0;
        const pr=parseFloat(styles.paddingRight)||0;
        const inner=carousel.clientWidth-pl-pr;
        const active=slideAt(0);
        track.style.transition = withAnim ? 'transform 600ms ease' : 'none';
        const target=active.offsetLeft+(active.offsetWidth/2)-(inner/2);
        track.style.transform=`translateX(${-target}px)`;
        if(!withAnim){ void track.offsetHeight; track.style.transition='transform 600ms ease'; }
      }

      function update(withAnim=true){ setPositions(); center(withAnim); updateBars(); }

      function next(){ index++; update(true); }
      function prev(){ index--; update(true); }

      function normalizeIfClone(){
        let normalized=false;
        if(index>=n+buffer){ index-=n; normalized=true; }
        else if(index<buffer){ index+=n; normalized=true; }
        if(normalized){ center(false); setPositions(); updateBars(); }
      }

      track.addEventListener('transitionend', normalizeIfClone);
      nextBtn.addEventListener('click', next); prevBtn.addEventListener('click', prev);
      carousel.addEventListener('keydown', e=>{ if(e.key==='ArrowLeft') prev(); if(e.key==='ArrowRight') next(); });

      function start(){ if(reduceMotion) return; stop(); timer=setInterval(next, AUTOPLAY_MS); }
      function stop(){ if(timer){ clearInterval(timer); timer=null; } }
      carousel.addEventListener('mouseenter', stop);
      carousel.addEventListener('mouseleave', start);
      carousel.addEventListener('focusin', stop);
      carousel.addEventListener('focusout', start);

      // Bars for real slides
      let bars=[];
      function buildBars(){
        const wrap=carousel.querySelector('.carousel-bars'); if(!wrap) return;
        wrap.innerHTML='';
        bars=originals.map((_,i)=>{
          const b=document.createElement('button'); b.type='button';
          b.setAttribute('aria-label',`Go to slide ${i+1}`);
          b.addEventListener('click',()=>{ index=buffer+i; update(true); });
          wrap.appendChild(b); return b;
        });
      }
      function realIndex(){ return (index-buffer+n)%n; }
      function updateBars(){ bars.forEach((b,i)=>b.setAttribute('aria-current', i===realIndex()?'true':'false')); }

      window.addEventListener('load', ()=>{ slides=Array.from(track.children); buildBars(); update(false); start(); });
      window.addEventListener('resize', ()=>{ center(false); });
    })();

    // Right-side section pager
    (function(){
      const pagerList = document.getElementById('pager-dots');
      if (!pagerList) return;
      const sections = Array.from(document.querySelectorAll('section.panel[id]'));
      if (!sections.length) return;
      sections.forEach((sec,i)=>{
        const li=document.createElement('li'); const a=document.createElement('a');
        a.href=`#${sec.id}`; a.setAttribute('role','link');
        a.setAttribute('aria-label',(sec.querySelector('h1,h2')?.textContent||`Section ${i+1}`).trim());
        a.setAttribute('aria-current','false');
        a.addEventListener('click',e=>{ e.preventDefault(); sec.scrollIntoView({behavior:'smooth', block:'start'}); });
        li.appendChild(a); pagerList.appendChild(li);
      });
      const dots=Array.from(pagerList.querySelectorAll('a'));
      function updateActive(id){ dots.forEach((a,idx)=>a.setAttribute('aria-current', sections[idx].id===id?'true':'false')); }

      if(!('IntersectionObserver' in window)){
        window.addEventListener('scroll',()=>{
          const y=window.scrollY+window.innerHeight*.5;
          let current=sections[0].id;
          sections.forEach(s=>{ if(s.offsetTop<=y) current=s.id; });
          updateActive(current);
        },{passive:true});
        updateActive(sections[0].id);
        return;
      }
      const io=new IntersectionObserver((entries)=>{
        let best=null;
        entries.forEach(ent=>{ if(ent.isIntersecting && (!best || ent.intersectionRatio>best.intersectionRatio)) best=ent; });
        if(best?.target?.id) updateActive(best.target.id);
      },{threshold:.6});
      sections.forEach(s=>io.observe(s));
      updateActive(sections[0].id);
    })();
  </script>
</body>
</html>


